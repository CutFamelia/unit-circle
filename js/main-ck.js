/**
 * UnitCircle Visualization
 * (c) 2014 Derrick Cohodas
 */function UnitCircle(){function a(e){var t=30,n=2,u="rgba(40,40,40,1)",a=Math.cos(e),f=Math.sin(e),l={inner:{x:(r-t/2)*a,y:(r-t/2)*f},outer:{x:(r+t/2)*a,y:(r+t/2)*f},text:{x:(r+2*t)*a-t/2,y:(r+2*t)*f-t/4},center:{x:r*a,y:r*f}};o.append("line").attr("class","angleMark").attr("x1",l.inner.x).attr("y1",l.inner.y).attr("x2",l.outer.x).attr("y2",l.outer.y).style("fill","none").style("stroke",u).style("stroke-width","3.5px");o.append("circle").attr("class","angleMark").attr("cx",l.center.x).attr("cy",l.center.y).attr("r",15).style("fill","rgba(0,0,0,0)").style("stroke","none");o.append("text").attr("class","angleMark").attr("x",l.text.x).attr("y",l.text.y).attr("transform","matrix(1, 0, 0, -1, "+(l.text.x-1*l.text.x)+", "+(l.text.y- -1*l.text.y)+")").attr("font-family","'Consolas', monospace, sans-serif").attr("font-size","12px").attr("fill",u).text(i[parseFloat(e).toFixed(2)][s])}function f(e){var t=30,n=2,i="rgba(40,40,40,1)",s=Math.cos(e),u=Math.sin(e),a={x:r*s,y:r*u};o.append("line").attr("class","angleSweep").attr("x1",0).attr("y1",0).attr("x2",a.x).attr("y2",a.y).style("fill","none").style("stroke",i).style("stroke-width","2px");o.append("line").attr("class","angleSweep").attr("x1",a.x).attr("y1",0).attr("x2",a.x).attr("y2",a.y).style("fill","none").style("stroke",i).style("stroke-width","2px").attr("stroke-dasharray","5, 5");if(a.x!==0&&a.y!==0){var f=a.x<0?-Math.floor(r/18):Math.floor(r/18),l=a.y<0?-Math.floor(r/18):Math.floor(r/18);o.append("polyline").attr("class","angleSweep").attr("points",a.x-f+",0 "+(a.x-f)+","+l+" "+a.x+","+l).style("fill","none").style("stroke",i).style("stroke-width","2px")}o.append("circle").attr("class","angleSweep").attr("cx",a.x).attr("cy",a.y).attr("r",5).style("fill",i).style("stroke","none");var c=d3.svg.arc().outerRadius(21).innerRadius(19).startAngle(Math.PI/2).endAngle(e+Math.PI/2);o.append("path").attr("class","angleSweep").attr("d",c).attr("r",20).style("stroke","rgba(255,0,0,1)").style("fill","rgba(255,0,0,1)")}function h(){$(".angleMark").remove();a(0);a(Math.PI/6);a(Math.PI/3);a(Math.PI/4);a(Math.PI/2);a(5*(Math.PI/6));a(2*(Math.PI/3));a(3*(Math.PI/4));a(Math.PI);a(7*(Math.PI/6));a(4*(Math.PI/3));a(5*(Math.PI/4));a(3*Math.PI/2);a(11*(Math.PI/6));a(5*(Math.PI/3));a(7*(Math.PI/4))}var e=d3.select("body"),t=960,n=700,r=160,i={},s=0;$("input[name=labelType]:radio").on("change",function(){s=$(this).val();h();console.log(s)});i[parseFloat(0).toFixed(2)]=["0 or 2π","0° or 360°","0","1"];i[parseFloat(Math.PI/6).toFixed(2)]=["π/6","30°","1/2","√3/2"];i[parseFloat(Math.PI/4).toFixed(2)]=["π/4","45°","1/√2","1/√2"];i[parseFloat(Math.PI/3).toFixed(2)]=["π/3","60°","√3/2","1/2"];i[parseFloat(Math.PI/2).toFixed(2)]=["π/2","90°","1","0"];i[parseFloat(2*(Math.PI/3)).toFixed(2)]=["2π/3","120°","√3/2","-1/2"];i[parseFloat(3*(Math.PI/4)).toFixed(2)]=["3π/4","135°","1/√2","-1/√2"];i[parseFloat(5*(Math.PI/6)).toFixed(2)]=["5π/6","150°","1/2","-√3/2"];i[parseFloat(Math.PI).toFixed(2)]=["π","180°","0","1"];i[parseFloat(7*(Math.PI/6)).toFixed(2)]=["7π/6","210°","-1/2","-√3/2"];i[parseFloat(5*(Math.PI/4)).toFixed(2)]=["5π/4","225°","-1/√2","-1/√2"];i[parseFloat(4*(Math.PI/3)).toFixed(2)]=["4π/3","240°","-√3/2","-1/2"];i[parseFloat(3*(Math.PI/2)).toFixed(2)]=["3π/2","270°","-1","0"];i[parseFloat(5*(Math.PI/3)).toFixed(2)]=["5π/3","300°","-√3/2","1/2"];i[parseFloat(7*(Math.PI/4)).toFixed(2)]=["7π/4","315°","-1/√2","1/√2"];i[parseFloat(11*(Math.PI/6)).toFixed(2)]=["11π/6","330°","-1/2","√3/2"];var o=e.append("svg").attr("width",t).attr("height",n).append("g").attr("transform","translate("+t/3+","+n/3+") scale(1, -1)").on("mousedown",function(){console.log(d3.mouse(this))}),u="rgba(100,100,100,1)";o.append("line").attr("class","y").attr("y1",-(r+30)).attr("y2",r+30).style("fill","none").style("stroke",u).style("stroke-width","2px");o.append("line").attr("class","x").attr("x1",-(r+30)).attr("x2",r+30).style("fill","none").style("stroke",u).style("stroke-width","2px");o.append("polygon").attr("class","ynArrow").attr("points","0,"+(r+40)+" 5,"+(r+30)+" -5,"+(r+30)).style("fill",u);o.append("polygon").attr("class","ypArrow").attr("points","0,"+ -(r+40)+" 5,"+ -(r+30)+" -5,"+ -(r+30)).style("fill",u);o.append("polygon").attr("class","xnArrow").attr("points",-(r+40)+",0 "+ -(r+30)+",5 "+ -(r+30)+",-5").style("fill",u);o.append("polygon").attr("class","xpArrow").attr("points",r+40+",0 "+(r+30)+",5 "+(r+30)+",-5").style("fill",u);o.append("circle").attr("class","center").attr("r","5px").style("fill","rgba(40, 40, 40, 1.0)");o.append("circle").attr("class","uc").attr("r",r).style("fill","rgba(0,0,0,0)").style("stroke","rgba(40, 40, 40, 1)").style("stroke-width","4px");var l=0,c=function(e){var t=d3.mouse(e);if(t[0]===0||t[1]===0)return;var n=Math.atan(t[1]/t[0]);n+=n<0?Math.PI/2:0;if(t[0]>=0&&t[1]>=0)angleToMouse=n;else if(t[0]<=0&&t[1]>=0)angleToMouse=n+Math.PI/2;else if(t[0]<=0&&t[1]<=0)angleToMouse=n+Math.PI;else{if(!(t[0]>=0&&t[1]<=0))return;angleToMouse=n+3*(Math.PI/2)}console.log(angleToMouse);$(".angleSweep").remove();f(angleToMouse);l=1;setTimeout(function(){l=0},10)};o.on("mousemove",function(){l||c(this)});h()}(function(e){uc=new UnitCircle})(jQuery);