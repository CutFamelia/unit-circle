/**
 * UnitCircle Visualization
 * (c) 2014 Derrick Cohodas
 */function UnitCircle(){function u(e){var t=30,n=2,i="rgba(40,40,40,1)",o=Math.cos(e),u=Math.sin(e),a={inner:{x:(r-t/2)*o,y:(r-t/2)*u},outer:{x:(r+t/2)*o,y:(r+t/2)*u},center:{x:r*o,y:r*u}};s.append("line").attr("class","angleMarkLine").attr("x1",a.inner.x).attr("y1",a.inner.y).attr("x2",a.outer.x).attr("y2",a.outer.y).style("fill","none").style("stroke",i).style("stroke-width","3.5px");s.append("circle").attr("class","angleMarkCircle").attr("cx",a.center.x).attr("cy",a.center.y).attr("r",15).style("fill","rgba(0,0,0,0)").style("stroke","none")}function a(e){var t=30,n=2,i="rgba(40,40,40,1)",o=Math.cos(e),u=Math.sin(e),a={x:r*o,y:r*u};s.append("line").attr("class","angleSweep").attr("x1",0).attr("y1",0).attr("x2",a.x).attr("y2",a.y).style("fill","none").style("stroke",i).style("stroke-width","2px");s.append("line").attr("class","angleSweep").attr("x1",a.x).attr("y1",0).attr("x2",a.x).attr("y2",a.y).style("fill","none").style("stroke",i).style("stroke-width","2px").attr("stroke-dasharray","5, 5");if(a.x!==0&&a.y!==0){var f=a.x<0?-Math.floor(r/18):Math.floor(r/18),l=a.y<0?-Math.floor(r/18):Math.floor(r/18);s.append("polyline").attr("class","angleSweep").attr("points",a.x-f+",0 "+(a.x-f)+","+l+" "+a.x+","+l).style("fill","none").style("stroke",i).style("stroke-width","2px")}s.append("circle").attr("class","angleSweep").attr("cx",a.x).attr("cy",a.y).attr("r",5).style("fill",i).style("stroke","none");var c=d3.svg.arc().outerRadius(21).innerRadius(19).startAngle(Math.PI/2).endAngle(e+Math.PI/2);s.append("path").attr("class","angleSweep").attr("d",c).attr("r",20).style("stroke","rgba(255,0,0,1)").style("fill","rgba(255,0,0,1)")}var e=d3.select("body"),t=960,n=500,r=180,i={};i[parseFloat(0).toFixed(2)]=["0 or 2&pi;","0&deg; or 360&deg;"];i[parseFloat(Math.PI/6).toFixed(2)]="&pi;/6";i[parseFloat(Math.PI/4).toFixed(2)]="&pi;/4";i[parseFloat(Math.PI/3).toFixed(2)]="&pi;/3";i[parseFloat(Math.PI/2).toFixed(2)]="&pi;/2";i[parseFloat(5*(Math.PI/6)).toFixed(2)]="5&pi;/6";i[parseFloat(2*(Math.PI/3)).toFixed(2)]="2&pi;/3";i[parseFloat(3*(Math.PI/4)).toFixed(2)]="3&pi;/4";i[parseFloat(Math.PI).toFixed(2)]="&pi;";i[parseFloat(7*(Math.PI/6)).toFixed(2)]="7&pi;/6";i[parseFloat(4*(Math.PI/3)).toFixed(2)]="4&pi;/3";i[parseFloat(5*(Math.PI/4)).toFixed(2)]="5&pi;/4";i[parseFloat(3*(Math.PI/2)).toFixed(2)]="3&pi;/2";i[parseFloat(11*(Math.PI/6)).toFixed(2)]="11&pi;/6";i[parseFloat(5*(Math.PI/3)).toFixed(2)]="5&pi;/3";i[parseFloat(7*(Math.PI/4)).toFixed(2)]="7&pi;/4";console.dir(i);var s=e.append("svg").attr("width",t).attr("height",n).append("g").attr("transform","translate("+t/2+","+n/2+") scale(1, -1)").on("mousedown",function(){console.log(d3.mouse(this))}),o="rgba(100,100,100,1)";s.append("line").attr("class","y").attr("y1",-(r+50)).attr("y2",r+50).style("fill","none").style("stroke",o).style("stroke-width","2px");s.append("line").attr("class","x").attr("x1",-(r+50)).attr("x2",r+50).style("fill","none").style("stroke",o).style("stroke-width","2px");s.append("polygon").attr("class","ynArrow").attr("points","0,"+(r+60)+" 5,"+(r+50)+" -5,"+(r+50)).style("fill",o);s.append("polygon").attr("class","ypArrow").attr("points","0,"+ -(r+60)+" 5,"+ -(r+50)+" -5,"+ -(r+50)).style("fill",o);s.append("polygon").attr("class","xnArrow").attr("points",-(r+60)+",0 "+ -(r+50)+",5 "+ -(r+50)+",-5").style("fill",o);s.append("polygon").attr("class","xpArrow").attr("points",r+60+",0 "+(r+50)+",5 "+(r+50)+",-5").style("fill",o);s.append("circle").attr("class","center").attr("r","5px").style("fill","rgba(40, 40, 40, 1.0)");s.append("circle").attr("class","uc").attr("r",r).style("fill","rgba(0,0,0,0)").style("stroke","rgba(40, 40, 40, 1)").style("stroke-width","4px");var f=0,l=function(e){var t=d3.mouse(e);if(t[0]===0||t[1]===0)return;var n=Math.atan(t[1]/t[0]);n+=n<0?Math.PI/2:0;if(t[0]>=0&&t[1]>=0)angleToMouse=n;else if(t[0]<=0&&t[1]>=0)angleToMouse=n+Math.PI/2;else if(t[0]<=0&&t[1]<=0)angleToMouse=n+Math.PI;else{if(!(t[0]>=0&&t[1]<=0))return;angleToMouse=n+3*(Math.PI/2)}console.log(angleToMouse);$(".angleSweep").remove();a(angleToMouse);f=1;setTimeout(function(){f=0},10)};s.on("mousemove",function(){f||l(this)});u(0);u(Math.PI/6);u(Math.PI/3);u(Math.PI/4);u(Math.PI/2);u(5*(Math.PI/6));u(2*(Math.PI/3));u(3*(Math.PI/4));u(Math.PI);u(7*(Math.PI/6));u(4*(Math.PI/3));u(5*(Math.PI/4));u(3*Math.PI/2);u(11*(Math.PI/6));u(5*(Math.PI/3));u(7*(Math.PI/4))}(function(e){uc=new UnitCircle})(jQuery);